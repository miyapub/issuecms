function closeOverlay(){jQuery("html").removeClass("noscroll"),jQuery(".overlay.show").removeClass("show")}function isTouchDevice(){return!!("ontouchstart"in window||navigator.msMaxTouchPoints)}var KEYCODE_ESCAPE=27,header_headroom;jQuery(document).ready(function(){jQuery('[data-action="toggle-overlay"]').click(function(a){a.preventDefault();var b=jQuery(this).attr("data-overlay-id");jQuery("html").hasClass("noscroll")?closeOverlay():(jQuery("html").addClass("noscroll"),jQuery("#"+b).addClass("show"),jQuery("#"+b+" .search-field").focus())}),jQuery(document).keyup(function(a){a.keyCode===KEYCODE_ESCAPE&&closeOverlay()}),jQuery(".header").click(function(a){0===jQuery(a.target).closest("a").length&&jQuery("html, body").animate({scrollTop:jQuery("html").offset().top})}),header_headroom=new Headroom(jQuery(".header")[0]),header_headroom.init(),header_headroom.onTop=function(){header_headroom.tolerance=Headroom.options.tolerance,header_headroom.pin()};var a=jQuery(".cover"),b=jQuery(".header .backdrop"),c=200;a.length>0&&b.lenth>0&&jQuery(window).on("scroll",function(){var d=jQuery(this).scrollTop(),e=a.offset().top,f=a.outerHeight();e+=f/2;var g=0+(d-e+c)/c;b.css({opacity:g}),g>"1"?b.css({opacity:1}):"0">g&&b.css({opacity:0})}),jQuery(".widget .sub-menu, .widget .children, .menu .children").addClass("hide").closest("li").addClass("menu-has-child").append('<div class="menu-toggle"><i class="fa fa-angle-down"></i></div>'),jQuery("body").on("click",".menu-toggle",function(a){a.stopPropagation();var b=jQuery(this);b.children(".fa-angle-down").toggleClass("fa-rotate-180"),b.siblings(".sub-menu, .children").toggleClass("hide")}),jQuery('a.swipebox[href]:not([href*="#"])').click(function(a){var b=jQuery(this);void 0!==jQuery.swipebox&&(a.preventDefault(),jQuery.swipebox([{href:b.attr("href")}]))}),jQuery('a[href*="#"]:not([href="#"]):not([href*="#comments"]):not([data-action="toggle-overlay"]):not([id^="aesop"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=jQuery(this.hash);if(a=a.length?a:jQuery("[name="+this.hash.slice(1)+"]"),a.length)return header_headroom.tolerance=Number.MAX_SAFE_INTEGER,header_headroom.unpin(),jQuery("html,body").animate({scrollTop:a.offset().top},500),setTimeout(function(){header_headroom.tolerance=Headroom.options.tolerance},1e3),!1}}),jQuery(".aesop-chapter-menu").length>0&&jQuery(document).on("click",".aesop-chapter-menu .scroll-nav__item a",function(){header_headroom.tolerance=Number.MAX_SAFE_INTEGER,header_headroom.unpin(),setTimeout(function(){header_headroom.tolerance=Headroom.options.tolerance},1e3)})});